@using Domain
@model ProductIndexModel

<div class="sortBar">
@{
    int id = 1; 
}
    <div class="sortLeft">
        <form asp-controller="Product" asp-action="IndexNew" method="post">
                <table>
                    <tr >
                        @{
                            for (int i = 0; i < @Model.WinkelItems.Count; i++)
                            {
                                <th><label asp-for="@Model.WinkelItems[i]">@Model.WinkelItems[i].Name</label>&nbsp
                                    <input type="checkbox" asp-for="@Model.WinkelItems[i].Selected"/>
                                    <input type="hidden" asp-for="@Model.WinkelItems[i].Id"/>
                                    <input type="hidden" asp-for="@Model.WinkelItems[i].Name"/>&nbsp &nbsp &nbsp
                                </th>
                            }
                        }
                        <th>
                            <input type="submit" value="Ga" class="btn btn-default"/>
                        </th>
                    </tr>
                </table>
            </form>
    </div>
    <div class="sortRight">
        <form asp-controller="Product" asp-action="IndexSearch" method="post">
        <input asp-for="@Model.SearchString" class="inputdetails"></input>&nbsp;<input type="submit" value="Zoek!" class="btn btn-default"/>
            </form>
    </div>
</div>


@{
    int count = 0; 
    @:<div class="card-deck">
    foreach (Product product in @Model.Products)
    {
        @:<div class="card">
        <a class="text-auto-even" asp-area="" asp-controller="Product" asp-action="Details" asp-route-id="@product.ProductId"><img class="card-img-top"  src="@Url.Action("getImg", "Product", new {id = product.ProductId})" alt="@product.Naam" ></a>
        @:<div class="card-body">
        <a class="text-auto-even" asp-area="" asp-controller="Product" asp-action="Details" asp-route-id="@product.ProductId"><h5 class="card-title">@product.Naam</h5></a>
        <a class="text-auto-even" asp-area="" asp-controller="Product" asp-action="Details" asp-route-id="@product.ProductId"><p class="card-text">@product.Beschrijving</p></a>
        @:<p class="card-text">
        if (product.ProductAllergies.Count > 0)
        {
            @:<small class="text-muted">Allergenen:
            string showThis = "";
            foreach (ProductAllergie allergie in product.ProductAllergies)
            {
                if (!allergie.Naam.Equals(product.ProductAllergies.Last().Naam))
                {
                    showThis = allergie.Naam + ", ";
                    @showThis
                }
                else
                {
                    showThis = allergie.Naam;
                    @showThis
                }
            }

            @:</small>
        }
        @:</p>
        @:</div> 
        @:</div>
        if (count == 2)
        {
            @:</div>
            @:<br/>
            @:<div class="card-deck">
            count = 0; 
        }
        else
        {
            count++;
        }
    }
}